<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุฎุชุจุงุฑ ุงูุฃุตูุงุช ูู ุงูุฎูููุฉ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
            text-align: center;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #45a049;
        }
        .status {
            margin: 20px 0;
            padding: 10px;
            background: #333;
            border-radius: 5px;
        }
        .instructions {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: right;
        }
    </style>
</head>
<body>
    <h1>ุงุฎุชุจุงุฑ ุชุดุบูู ุงูุฃุตูุงุช ูู ุงูุฎูููุฉ</h1>
    
    <div class="instructions">
        <h3>ุชุนูููุงุช ุงูุงุฎุชุจุงุฑ:</h3>
        <ol>
            <li>ุงุถุบุท ุนูู "ุชูุนูู ุงูุตูุช" ุฃููุงู</li>
            <li>ุงุถุบุท ุนูู "ุชุดุบูู ุตูุช ุงูุฅุดุนุงุฑ"</li>
            <li>ุงูุชูู ุฅูู ุชุจููุจ ุขุฎุฑ ูู ุงููุชุตูุญ</li>
            <li>ุงุฑุฌุน ููุฐุง ุงูุชุจููุจ ูุงุถุบุท ุนูู "ุชุดุบูู ุตูุช ูู ุงูุฎูููุฉ"</li>
            <li>ุงูุชูู ูุฑุฉ ุฃุฎุฑู ุฅูู ุชุจููุจ ุขุฎุฑ</li>
            <li>ูุฌุจ ุฃู ุชุณูุน ุงูุตูุช ุญุชู ูุฃูุช ูู ุงูุชุจููุจ ุงูุขุฎุฑ</li>
        </ol>
    </div>

    <div class="status" id="status">
        ุงูุญุงูุฉ: ูู ุงูุชุธุงุฑ ุชูุนูู ุงูุตูุช
    </div>

    <button onclick="enableAudio()">ุชูุนูู ุงูุตูุช</button>
    <button onclick="playNotificationSound()">ุชุดุบูู ุตูุช ุงูุฅุดุนุงุฑ</button>
    <button onclick="testBackgroundSound()">ุชุดุบูู ุตูุช ูู ุงูุฎูููุฉ</button>
    <button onclick="testChatSound()">ุชุดุบูู ุตูุช ุงููุญุงุฏุซุฉ</button>

    <script>
        let audioContext = null;
        let audioEnabled = false;

        function updateStatus(message) {
            document.getElementById('status').textContent = 'ุงูุญุงูุฉ: ' + message;
            console.log('๐ Status:', message);
        }

        async function enableAudio() {
            try {
                const AudioContextClass = window.AudioContext || window.webkitAudioContext;
                if (!AudioContextClass) {
                    updateStatus('ุงููุชุตูุญ ูุง ูุฏุนู Web Audio API');
                    return;
                }

                if (!audioContext) {
                    audioContext = new AudioContextClass();
                }

                if (audioContext.state === 'suspended') {
                    await audioContext.resume();
                }

                audioEnabled = true;
                updateStatus('ุชู ุชูุนูู ุงูุตูุช ุจูุฌุงุญ');
                console.log('โ Audio enabled successfully');
            } catch (error) {
                updateStatus('ูุดู ูู ุชูุนูู ุงูุตูุช: ' + error.message);
                console.error('โ Failed to enable audio:', error);
            }
        }

        async function playAudio(audioPath, description) {
            try {
                updateStatus('ุฌุงุฑู ุชุดุบูู ' + description + '...');
                
                // Resume audio context if suspended
                if (audioContext && audioContext.state === 'suspended') {
                    await audioContext.resume();
                    console.log('๐ต Audio context resumed');
                }

                const audio = new Audio(audioPath);
                audio.volume = 0.3;
                audio.preload = 'auto';
                
                const playPromise = audio.play();
                if (playPromise) {
                    await playPromise;
                    updateStatus('ุชู ุชุดุบูู ' + description + ' ุจูุฌุงุญ');
                    console.log('โ Audio played successfully:', audioPath);
                } else {
                    updateStatus('ุชู ุชุดุบูู ' + description + ' (ูุชุตูุญ ูุฏูู)');
                }
            } catch (error) {
                updateStatus('ูุดู ูู ุชุดุบูู ' + description + ': ' + error.message);
                console.error('โ Failed to play audio:', error);
            }
        }

        function playNotificationSound() {
            playAudio('/notification-Sound.mp3', 'ุตูุช ุงูุฅุดุนุงุฑ');
        }

        function testChatSound() {
            playAudio('/chat-sound.mp3', 'ุตูุช ุงููุญุงุฏุซุฉ');
        }

        function testBackgroundSound() {
            updateStatus('ุงุฎุชุจุงุฑ ุงูุตูุช ูู ุงูุฎูููุฉ - ุงูุชูู ุฅูู ุชุจููุจ ุขุฎุฑ ุงูุขู');
            
            setTimeout(() => {
                console.log('๐ Playing background sound...');
                playAudio('/notification-Sound.mp3', 'ุตูุช ุงูุฎูููุฉ');
            }, 3000);
        }

        // Handle visibility change
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                console.log('๐ฑ Tab hidden - audio should still work');
            } else {
                console.log('๐ฑ Tab visible - resuming if needed');
                if (audioContext && audioContext.state === 'suspended') {
                    audioContext.resume();
                }
            }
        });

        // Auto-enable audio on first interaction
        document.addEventListener('click', enableAudio, { once: true });
    </script>
</body>
</html>