# ๐ช ุฅุตูุงุญ ูุดููุฉ ุชุณุฌูู ุงูุฎุฑูุฌ - ุชู ุงูุฅูุฌุงุฒ โ

## ๐ ุงููุดุงูู ุงูุชู ุชู ุญููุง:

### 1. **ูุดููุฉ Cookies Domain:**
- โ ุฅุฒุงูุฉ domain restriction: `domain: undefined`
- โ ุฅุตูุงุญ ูุดููุฉ `.gear-score.com` domain
- โ ุงูุณูุงุญ ููููููุฒ ุจุงูุนูู ุนูู ุฌููุน subdomains

### 2. **ูุดููุฉ Cookie Settings:**
- โ ุฅุตูุงุญ `sameSite: 'lax'`
- โ ุฅุตูุงุญ `secure: process.env.NODE_ENV === 'production'`
- โ ุฅุตูุงุญ `path: '/'`

### 3. **ูุดููุฉ Sign-Out Event:**
- โ ุฅุถุงูุฉ signOut event handler
- โ ุชูุธูู session data
- โ ุชูุธูู token data

## ๐ ููููุฉ ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ:

### 1. **ุงุฎุชุจุงุฑ ูู ุงููุชุตูุญ:**
- ุงุฐูุจ ุฅูู: `https://gear-score.com/auth`
- ุณุฌู ุฏุฎูู ุฃููุงู (ุจุงูุฏูุณููุฑุฏ ุฃู ุงูุฅูููู)
- ุงุถุบุท ุนูู "Sign Out" ุฃู "ุชุณุฌูู ุงูุฎุฑูุฌ"
- ุชุฃูุฏ ูู ุฃูู ุชู ุชูุฌููู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

### 2. **ุงุฎุชุจุงุฑ ุงูููููุฒ:**
- ุงูุชุญ Developer Tools (F12)
- ุงุฐูุจ ุฅูู Application > Cookies
- ุชุฃูุฏ ูู ุฃู `next-auth.session-token` ุชู ุญุฐูู
- ุชุฃูุฏ ูู ุฃู `next-auth.csrf-token` ุชู ุญุฐูู

### 3. **ุงุฎุชุจุงุฑ Session:**
- ุจุนุฏ ุชุณุฌูู ุงูุฎุฑูุฌุ ุงุฐูุจ ุฅูู: `https://gear-score.com/api/auth/session`
- ูุฌุจ ุฃู ุชุฑู: `{"user":null}`

## ๐ ูุฑุงูุจุฉ ุงูุฅุตูุงุญ:

### 1. **ุนุฑุถ Logs:**
```bash
# ุนุฑุถ logs ุงูุชุทุจูู
pm2 logs mainwebsite

# ุงูุจุญุซ ุนู sign-out events
pm2 logs mainwebsite | grep "Sign-out"
```

### 2. **ุงุฎุชุจุงุฑ API:**
```bash
# ุงุฎุชุจุงุฑ sign-out endpoint
curl -X POST https://gear-score.com/api/auth/signout

# ุงุฎุชุจุงุฑ session endpoint
curl https://gear-score.com/api/auth/session
```

### 3. **ูุฑุงูุจุฉ ุงูููููุฒ:**
```bash
# ูู ุงููุชุตูุญุ ุงูุชุญ Developer Tools
# Application > Cookies > https://gear-score.com
# ุชุฃูุฏ ูู ุญุฐู ุฌููุน next-auth cookies
```

## ๐งช ุงุฎุชุจุงุฑ ุดุงูู:

### 1. **ุชุดุบูู ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ:**
```bash
node test-signout-fix.js
```

### 2. **ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงููุชููุนุฉ:**
- โ Domain restriction removed from cookies
- โ Sign-out event handler exists
- โ SameSite cookie setting is correct
- โ next-auth is installed

### 3. **ุฅุฐุง ูุดู ุงูุงุฎุชุจุงุฑ:**
- ุชุญูู ูู ููู `.env`
- ุชุฃูุฏ ูู `NEXTAUTH_URL=https://gear-score.com`
- ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู: `pm2 restart mainwebsite`

## ๐ฑ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ ุงูุชูุตูููุฉ:

### **ุงูุฎุทูุฉ 1: ุชุณุฌูู ุงูุฏุฎูู**
1. ุงุฐูุจ ุฅูู `https://gear-score.com/auth`
2. ุงุฎุชุฑ "Login with Discord" ุฃู ุฃุฏุฎู ุงูุฅูููู ููููุฉ ุงููุฑูุฑ
3. ุชุฃูุฏ ูู ุฃูู ูุณุฌู ุฏุฎูู

### **ุงูุฎุทูุฉ 2: ูุชุญ Developer Tools**
1. ุงุถุบุท F12
2. ุงุฐูุจ ุฅูู Application > Cookies
3. ุงุจุญุซ ุนู `next-auth.session-token`
4. ุชุฃูุฏ ูู ูุฌูุฏู

### **ุงูุฎุทูุฉ 3: ุชุณุฌูู ุงูุฎุฑูุฌ**
1. ุงุถุบุท ุนูู "Sign Out" ุฃู "ุชุณุฌูู ุงูุฎุฑูุฌ"
2. ุชุฃูุฏ ูู ุฃูู ุชู ุชูุฌููู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

### **ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงูููููุฒ**
1. ูู Developer Tools > Cookies
2. ุชุฃูุฏ ูู ุญุฐู `next-auth.session-token`
3. ุชุฃูุฏ ูู ุญุฐู `next-auth.csrf-token`

### **ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ Session**
1. ุงุฐูุจ ุฅูู `https://gear-score.com/api/auth/session`
2. ูุฌุจ ุฃู ุชุฑู: `{"user":null}`

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

### 1. **ุชุญูู ูู Browser Cache:**
- ุงูุณุญ cache ุงููุชุตูุญ
- ุงูุณุญ cookies
- ุฌุฑุจ ูุชุตูุญ ูุฎุชูู

### 2. **ุชุญูู ูู Server Logs:**
```bash
pm2 logs mainwebsite --lines 100
```

### 3. **ุชุญูู ูู Environment:**
```bash
cat .env | grep NEXTAUTH
```

### 4. **ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู:**
```bash
pm2 restart mainwebsite
```

## ๐ฏ ุงููุชุงุฆุฌ ุงููุชููุนุฉ:

ุจุนุฏ ุชุทุจูู ุงูุฅุตูุงุญุงุช:
- โ ุชุณุฌูู ุงูุฎุฑูุฌ ูุนูู ุจุดูู ุตุญูุญ
- โ ุงูููููุฒ ูุชู ุญุฐููุง
- โ Session ูุชู ุฅููุงุคูุง
- โ ุงููุณุชุฎุฏู ูุชู ุชูุฌููู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
- โ ูุง ูููู ุงููุตูู ูููุญุชูู ุงููุญูู

## ๐ ุงูุฏุนู:

ุฅุฐุง ููุช ุชุญุชุงุฌ ูุณุงุนุฏุฉ ุฅุถุงููุฉ:
1. ุชุญูู ูู logs
2. ุดุบู diagnostic tools
3. ุฃุฑุณู screenshots ูู Developer Tools
4. ูุตู ุงููุดููุฉ ุจุงูุชูุตูู

---

**ููุงุญุธุฉ:** ุชู ุชุทุจูู ุฌููุน ุฅุตูุงุญุงุช ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ. ุงูุขู ูุฌุจ ุฃู ูุนูู ุชุณุฌูู ุงูุฎุฑูุฌ ุจุดูู ุทุจูุนู! ๐ฏ
